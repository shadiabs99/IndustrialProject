{% extends "campaigns/base.html" %} {% block content %}

<!DOCTYPE html>
<html lang="en" dir="Itr">
<br />
<head class="idea_banner">
  {% load static %}
  <link
    href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css"
    rel="stylesheet"
    integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC"
    crossorigin="anonymous"
  />
  <link rel="stylesheet" href="{% static 'idea_details.css' %}" />
  <link
    rel="stylesheet"
    href="https://fonts.googleapis.com/css?family=Inter:400,800,900&display=swap"
  />
  <link
    rel="stylesheet"
    href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css"
  />
  <link
    href="https://fonts.googleapis.com/icon?family=Material+Icons"
    rel="stylesheet"
  />
  <link
    href="https://fonts.cdnfonts.com/css/intelone-display"
    rel="stylesheet"
  />
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@48,400,0,0" />  <meta charset="utf-8" />
  <style>
    a:link {
      color: aqua;
    }
  </style>
</head>

<body>
  <div class="idea_container">
    <div class="idea_title">
      {{ idea.idea_title }}
    </div>

    <div class="idea_info">
      <div class="back_sol_impact">
        <div class="nav nav-tabs justify-content-center" id="myTab" role="tablist">
          <button class="nav-link active" id="tab1-tab" data-bs-toggle="tab" data-bs-target="#tab1" type="button" role="tab" aria-controls="tab1" aria-selected="true">Background</button>&nbsp;
          <button class="nav-link" id="tab2-tab" data-bs-toggle="tab" data-bs-target="#tab2" type="button" role="tab" aria-controls="tab2" aria-selected="false">Solution</button>&nbsp;
          <button class="nav-link" id="tab3-tab" data-bs-toggle="tab" data-bs-target="#tab3" type="button" role="tab" aria-controls="tab3" aria-selected="false">Impact</button>
        </div>
        <div class="tab-content" id="myTabContent">
          <div class="tab-pane fade show active" id="tab1" role="tabpanel" aria-labelledby="tab1-tab">
            {{ idea.background }}
          </div>
          <div class="tab-pane fade" id="tab2" role="tabpanel" aria-labelledby="tab2-tab">
            {{ idea.solution}}
          </div>
          <div class="tab-pane fade" id="tab3" role="tabpanel" aria-labelledby="tab3-tab">
            {{ idea.impact }}
          </div>
        </div>
      </div>
      <div class="idea_dates">
        <div class="campaign_info_start">
          &nbsp;&nbsp;Created by 
          <span id="team_name">
            {{ idea.team }} 
          </span>
          team at:&nbsp;
          <span id="start_date">
            {{ idea.idea_created_at }}
          </span>
        </div>
        <div  class="campaign_info_end">
          Updated at:&nbsp;
          <span id="end_date">
            {{ idea.idea_updated_at }}&nbsp;&nbsp;
          </span>
        </div>
      </div>
      
    </div>

    <div class="idea_statistics">
      <span class="idea_likes">
          <form action="http://127.0.0.1:8000/campaigns/{{campaign.id}}/ideas/{{idea.id}}/like/" method="POST">
            {% csrf_token %}
            <input type="hidden" name="campaign_id" value="{{campaign.id}}"/>
            {% if user not in idea.idea_likes.all %}
            <button id="thumb_up_idea" class="material-icons" type="submit">
              thumb_up
            </button>
            {% else%}
            <button id="thumb_down_idea" class="material-icons" type="submit">
              thumb_down
            </button>
            {% endif %}
          </form>
          This idea has {{ idea.idea_likes.all.count }} likes
      </span>
      <br>
      <span class="idea_url_file">

        {% if idea.idea_url %}
        <a href="{{ idea.idea_url }}" class="btn btn-primary btn-sm">
          <span class="material-symbols-outlined">
            Link
          </span>
        </a>
        {% endif %}

        {% if idea.file %}
        <a href="{{ idea.file.url }}" class="btn btn-primary btn-sm">
          <span class="material-symbols-outlined">
            description
          </span>
        </a>
        {% endif %}

      </span>
      <br>
      <span class="advanced_options">
        {% if user.is_authenticated and user == idea.author %}

        <li class="dropdown" id="authors-dropdown">
          <button
            class="btn btn-secondary dropdown-toggle"
            type="button"
            id="dropdownMenu2"
            data-bs-toggle="dropdown"
            aria-expanded="false"
            id="managers_options"
          >
            Advanced Options
          </button>
          <ul
            class="dropdown-menu"
            aria-labelledby="navbarDropdown"
            id="CampaignDropDown"
          >
            <li>
              <a
                class="dropdown-item"
                href="http://127.0.0.1:8000/campaigns/{{campaign.id}}/update"
              >
                Update
              </a>
            </li>

            <li>
              <a
                class="dropdown-item"
                href="http://127.0.0.1:8000/campaigns/{{campaign.id}}/delete"
                onclick="return confirm('Are you sure you want to delete this campaign?\n\nThis action is IRREVERSABLE!')"
              >
                Delete
              </a>
            </li>

            <li>
              <a
                class="dropdown-item"
                href="http://127.0.0.1:8000/campaigns/{{campaign.id}}/close"
                onclick="return confirm('Are you sure you want to close this campaign? \n\nThis action moves your campaign to archive.')"
              >
                Update Status
              </a>
            </li>
          </ul>
        </li>

        {% endif %}
      </span>
    </div>



    <div class="idea_comments_container">
      <div class="comments_number_sort">
      </div>
      <div class="idea_comments">
        <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-wvfXpqpZZVQGK6TAh5PVlGOfQNHSoD2xbE+QkPxCAFlNEevoEH3Sl0sibVcOQVnN" crossorigin="anonymous">
        <div class="container">
        <div class="row">
            {% for comment in comments %}
            <div class="col-md-8">
                <div class="media g-mb-30 media-comment">
                    <div class="media-body u-shadow-v18 g-bg-secondary g-pa-30">
                      <div class="g-mb-15">
                        <h5 class="h5 g-color-gray-dark-v1 mb-0">{{ comment.author}} </h5>
                        <span class="g-color-gray-dark-v4 g-font-size-12">Posted: #!</span>
                      </div>
                
                      <p>{{comment.content}}</p>
                
                      <ul class="list-inline d-sm-flex my-0">
                        <li class="list-inline-item g-mr-20">
                          <a class="u-link-v5 g-color-gray-dark-v4 g-color-primary--hover" href="#!">
                            <i class="fa fa-thumbs-up g-pos-rel g-top-1 g-mr-3"></i>
                            {{ comment.likes.all.count }}
                          </a>
                        </li>
                        <li class="list-inline-item ml-auto">
                          <a class="u-link-v5 g-color-gray-dark-v4 g-color-primary--hover" href="#!">
                            <i class="fa fa-reply g-pos-rel g-top-1 g-mr-3"></i>
                            Reply
                          </a>
                        </li>
                      </ul>
                    </div>
                </div>
            </div>
            {% endfor %}
        </div>
        </div>
        
      </div>
    </div>


  </div>
</body>





















{% comment %} <div class="container">
  <br />
  <br />
  <div id="title-and-description">
    <div id="idea_info">Background::</div>
    <h3>{{ idea.background }}</h3>
    <div id="idea_info">Proposed Solution:</div>
    <h3>{{ idea.solution }}</h3>
    <div id="idea_info">Impact:</div>
    <h3>{{ idea.impact }}</h3>
    {% if idea.file %}
    <a href="{{ idea.file.url }}" class="btn btn-primary btn-sm"> Show File </a>
    {% endif %}
    <h2></h2>
  </div>

  <div id="author">
    <div id="author_info">Title:</div>
    <h4>{{ idea.idea_title }}</h4>
    <div id="author_info">Suggested By:</div>
    <h4>{{ idea.author }}</h4>
    <div id="author_info">Team:</div>
    <h4>{{ idea.team }}</h4>
  </div>

  <div id="statistics">
    {% if campaign.campaign_opened == True %}

    <form
      action="http://127.0.0.1:8000/campaigns/{{campaign_id}}/ideas/{{idea.id}}/like/"
      method="POST"
    >
      {% csrf_token %}
      <input type="hidden" name="campaign_id" value="{{campaign.id}}" />
      {% if user not in idea.idea_likes.all %}

      <button id="thumb_up" class="material-icons" type="submit">
        thumb_up
      </button>
      {% else%}
      <button id="thumb_down" class="material-icons" type="submit">
        thumb_down
      </button>
      {% endif %}
      <div><strong> {{ idea.idea_likes.all.count }} likes </strong></div>
    </form>
    <a
      href="http://127.0.0.1:8000/campaigns/{{campaign_id}}/ideas/{{idea.id}}/comments/create"
      data-role="button"
      data-inline="true"
    >
      <button type="button" class="btn btn-outline-light">
        Add Comment
      </button></a
    >

    {% if user.is_authenticated and user == idea.author %}
    <a
      href="http://127.0.0.1:8000/campaigns/{{campaign_id}}/ideas/{{idea.id}}/update"
      data-role="button"
      data-inline="true"
      ><button type="button" class="btn btn-outline-light">
        Update Idea
      </button></a
    >
    <a
      href="http://127.0.0.1:8000/campaigns/{{campaign_id}}/ideas/{{idea.id}}/delete"
      data-role="button"
      data-inline="true"
      ><button
        type="button"
        class="btn btn-outline-light"
        onclick="return confirm('Are you sure you want to delete this idea?')"
      >
        Delete Idea
      </button></a
    >
    {% endif %}
    {%endif%}
  </div>

  <div id="comments">
    <div class="comments_double_container">
      <div class="comments_container">
        <h4 id="ddd">{{comments.all.count}} total comments</h4>
        <div class="comment_col">
          {% for comment in comments %} {% if comment.comment_id == null %}
          <br />
          <div class="comment_row">
            {{ comment.content }}
            <div>
              <br />
              <div id="comment_info">Written by: {{comment.author}}</div>
              <div id="comment_replies">
                <a
                  href="http://127.0.0.1:8000/campaigns/{{campaign_id}}/ideas/{{idea.id}}/comments/{{comment.id}}/details"
                  data-role="button"
                  data-inline="true"
                  ><button type="button" class="btn btn-outline-dark">
                    Show {{ comment.replies.all.count }} replies
                  </button></a
                >
              </div>
              {% if campaign.campaign_opened == True %}

              <a
                href="http://127.0.0.1:8000/campaigns/{{campaign_id}}/ideas/{{idea.id}}/comments/{{comment.id}}/reply"
                data-role="button"
                data-inline="true"
                ><button type="button" class="btn btn-outline-dark">
                  Reply
                </button></a
              >

              {% if user.is_authenticated and user == comment.author %}
              <a
                href="http://127.0.0.1:8000/campaigns/{{campaign_id}}/ideas/{{idea.id}}/comments/{{comment.id}}/update"
                data-role="button"
                data-inline="true"
                ><button type="button" class="btn btn-outline-dark">
                  Update Comment
                </button></a
              >
              <a
                href="http://127.0.0.1:8000/campaigns/{{campaign_id}}/ideas/{{idea.id}}/comments/{{comment.id}}/delete"
                data-role="button"
                data-inline="true"
                ><button
                  type="button"
                  class="btn btn-outline-dark"
                  onclick="return confirm('Are you sure you want to delete this comment?')"
                >
                  Delete Comment
                </button></a
              >
              {%endif%}
              {%endif%}
              <div style="float: right">
                <form
                  action="http://127.0.0.1:8000/campaigns/{{campaign_id}}/ideas/{{idea.id}}/comments/{{comment.id}}/like/"
                  method="POST"
                >
                  {% csrf_token %}
                  <input
                    type="hidden"
                    name="campaign_id"
                    value="{{campaign.id}}"
                  />
                  {% if user not in comment.likes.all %}
                  <button
                    id="thumb_up_comment"
                    class="material-icons"
                    type="submit"
                  >
                    thumb_up
                  </button>
                  {% else%}
                  <button
                    id="thumb_down_comment"
                    class="material-icons"
                    type="submit"
                  >
                    thumb_down
                  </button>
                  {% endif %}
                </form>
              </div>
              <div
                class="comment-num-of-likes"
                style="float: right; padding-right: 10px"
              >
                {{ comment.likes.all.count }} likes
              </div>
            </div>
          </div>
          {%endif%} {% endfor %}
        </div>
      </div>
    </div>
  </div>
</div>
</body> {% endcomment %}

{% endblock %}
