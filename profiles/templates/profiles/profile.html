{% extends "campaigns/base.html" %} {% block content %}
<!DOCTYPE html>
<html lang="en" dir="ltr">
   <br />
   
   <head class="campaign_banner">
      {% load static %}
      <link rel="stylesheet" href="{% static 'profile.css' %}" />
      <link rel="stylesheet" href="{% static 'campaign_details.css' %}" />

      <link
         href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css"
         rel="stylesheet"
         integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC"
         crossorigin="anonymous"
         />
      <link
         rel="stylesheet"
         href="https://fonts.googleapis.com/css?family=Inter:400,800,900&display=swap"
         />
      <link
         rel="stylesheet"
         href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css"
         />
      <link
         href="https://fonts.googleapis.com/icon?family=Material+Icons"
         rel="stylesheet"
         />
      <link
         href="https://fonts.cdnfonts.com/css/intelone-display"
         rel="stylesheet"
         />
      <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@48,400,0,0" />
      <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" />
      <meta charset="utf-8" />
   </head>

   <body>
      <div class="profile_container">
         <div class="profile_picture">
            <img src="{{ profile.image.url }} "/>
            <div class="username">
               {{profile.user.username}}            
            </div>
         </div>
         <div class="profile_info">
            <span class="info_title">
               Full Name:
            </span>
            <br>
            <span class="info_body">
               {{profile.user.first_name}} {{profile.user.last_name}}
            </span>
            <br>
            <br>
            <span class="info_title">
               Email:
            </span>
            <br>
            <span class="info_body">
               {{profile.user.email}}            
            </span>
         </div>
         <div class="profile_left_banner"></div>



         <div class="profile_favorites">
            <span class="profile_titles">Currently participated campaigns:</span>
            <div class="participated_campaigns">
               
            <ul class="participated_campaigns_list">
               {% for campaign in participated_campaigns %}
               <li>
                  <span><img class="campaign_image"
                     src="{{ campaign.image.url }} "></span>
               </li>
               {% endfor %}
            </ul>
            </div>
            {% for idea in favorite_ideas %}
                  <div class="accordion" id="accordionExample">
                     {% if forloop.counter == 1 %}
                     <div class="accordion-item">
                        <h2 class="accordion-header" id="idea{{ forloop.counter }}">
                           <button
                              class="accordion-button"
                              type="button"
                              data-bs-toggle="collapse"
                              data-bs-target="#collapse{{ forloop.counter }}"
                              aria-expanded="true"
                              aria-controls="collapse{{ forloop.counter }}"
                              >
                           <a
                              href="http://127.0.0.1:8000/campaigns/{{campaign.id}}/ideas/{{idea.id}}"
                              style="color: #0071c5"
                              >
                           <strong>{{ idea.idea_title }}</strong>
                           </a>
                           </button>
                        </h2>
                        <div
                           id="collapse{{ forloop.counter }}"
                           class="accordion-collapse collapse show"
                           aria-labelledby="idea{{ forloop.counter }}"
                           data-bs-parent="#accordionExample"
                           >
                           <div class="accordion-body">
                              <strong>Background:</strong> {{ idea.background }}
                              <br />
                              <strong>Solution:</strong> {{ idea.solution }}
                              <br />
                              <strong>Impact:</strong> {{ idea.impact }}
                              <br />
                              <br />
                              Sugegsted by the <strong>{{ idea.team }}</strong> team in
                              <strong>{{ idea.idea_created_at }}</strong>
                              <div style="float: right">
                                 {% if campaign.campaign_opened == True %}
                                 <form
                                    action="http://127.0.0.1:8000/campaigns/{{campaign.id}}/ideas/{{idea.id}}/like/"
                                    method="POST"
                                    >
                                    {% endif %}
                                    {% csrf_token %}
                                    <input
                                       type="hidden"
                                       name="campaign_id"
                                       value="{{campaign.id}}"
                                       />
                                    {% if user not in idea.idea_likes.all %}
                                    <button
                                       id="thumb_up_idea"
                                       class="material-icons"
                                       type="submit"
                                       >
                                    thumb_up
                                    </button>
                                    {% else %}
                                    <button
                                       id="thumb_down_idea"
                                       class="material-icons"
                                       type="submit"
                                       >
                                    thumb_down
                                    </button>
                                    {% endif %}
                                 </form>
                              </div>
                              <div
                                 class="idea-num-of-likes"
                                 style="float: right;"
                                 >
                                 {{ idea.idea_likes.all.count }}
                              </div>
                           </div>
                        </div>
                     </div>
                     {% endif %} {% if forloop.counter != 1 %}
                     <div class="accordion-item">
                        <h2 class="accordion-header" id="heading{{ forloop.counter }}">
                           <button
                              class="accordion-button collapsed"
                              type="button"
                              data-bs-toggle="collapse"
                              data-bs-target="#collapse{{ forloop.counter }}"
                              aria-expanded="false"
                              aria-controls="collapse{{ forloop.counter }}"
                              >
                           <a
                              href="http://127.0.0.1:8000/campaigns/{{campaign.id}}/ideas/{{idea.id}}"
                              style="color: #0071c5"
                              >
                           <strong>{{ idea.idea_title }}</strong>
                           </a>
                           </button>
                        </h2>
                        <div
                           id="collapse{{ forloop.counter }}"
                           class="accordion-collapse collapse"
                           aria-labelledby="heading{{ forloop.counter }}"
                           data-bs-parent="#accordionExample"
                           >
                           <div class="accordion-body">
                              <strong>Background:</strong> {{ idea.background }}
                              <br />
                              <strong>Solution:</strong> {{ idea.solution }}
                              <br />
                              <strong>Impact:</strong> {{ idea.impact }}
                              <br />
                              <br />
                              Sugegsted by the <strong>{{ idea.team }}</strong> team in
                              <strong>{{ idea.idea_created_at }}</strong>
                              <div style="float: right">
                                 {% if campaign.campaign_opened == True %}
                                 <form
                                    action="http://127.0.0.1:8000/campaigns/{{campaign.id}}/ideas/{{idea.id}}/like/"
                                    method="POST"
                                    onclick="check_if_open(campaign.campaign_opened)"
                                    >
                                    {% endif %}
                                    {% csrf_token %}
                                    <input
                                       type="hidden"
                                       name="campaign_id"
                                       value="{{campaign.id}}"
                                       />
                                    {% if user not in idea.idea_likes.all %}
                                    <button
                                       id="thumb_up_idea"
                                       class="material-icons"
                                       type="submit"
                                       >
                                    thumb_up
                                    </button>
                                    {% else%}
                                    <button
                                       id="thumb_down_idea"
                                       class="material-icons"
                                       type="submit"
                                       >
                                    thumb_down
                                    </button>
                                    {% endif %}
                                 </form>
                              </div>
                              <div
                                 class="idea-num-of-likes"
                                 style="float: right;"
                                 >
                                 {{ idea.idea_likes.all.count }} 
                              </div>
                           </div>
                        </div>
                     </div>
                     {% endif %}
                     <br />
                  </div>
                  {% endfor %}
         </div>



         <div class="profile_latest_comments">
            {% for comment in latest_comments %}
               <div>
                  <p>{{ comment.content }}</p>
                  <p>Created at: {{ comment.created_at }}</p>
                  <!-- Add more HTML elements or data from the comment object as needed -->
               </div>
            {% endfor %}
         </div>
         
      </div>
   </body>
</html>
{% endblock %}